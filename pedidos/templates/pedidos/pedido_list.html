<!-- pedidos/templates/pedidos/pedido_list.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Lista de Pedidos</title>
</head>
<body>
    <h1>Lista de Pedidos</h1>
    <form method="get">
        <input type="text" name="search" value="{{ search_query }}" placeholder="Buscar por producto">
        <label for="proveedor">Proveedor:</label>
        <select name="proveedor" id="proveedor">
            <option value="">Todos</option>
            {% for proveedor in proveedores %}
            <option value="{{ proveedor.id_proveedor }}" {% if proveedor.id_proveedor|stringformat:"s" == proveedor_id %}selected{% endif %}>
                {{ proveedor.nombre }}
            </option>
            {% endfor %}
        </select>
        <label for="estado">Estado:</label>
        <select name="estado" id="estado">
            <option value="">Todos</option>
            {% for estado_option in estados %}
            <option value="{{ estado_option }}" {% if estado_option == estado %}selected{% endif %}>{{ estado_option }}</option>
            {% endfor %}
        </select>
        <button type="submit">Filtrar</button>
    </form>
    <a href="{% url 'pedidos:pedido_create' %}">Crear Nuevo Pedido</a>
    <table border="1">
        <thead>
            <tr>
                <th>ID</th>
                <th>Proveedor</th>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Valor</th>
                <th>Estado</th>
                <th>IVA</th>
                <th>Total</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for pedido in pedidos %}
            <tr>
                <td>{{ pedido.id }}</td>
                <td>{{ pedido.proveedor }}</td>
                <td>{{ pedido.producto }}</td>
                <td>{{ pedido.cantidad }}</td>
                <td>{{ pedido.valor }}</td>
                <td>{{ pedido.estado }}</td>
                <td>{{ pedido.iva }}</td>
                <td>{{ pedido.total }}</td>
                <td>
                    <a href="{% url 'pedidos:pedido_update' pedido.pk %}">Editar</a>
                    <a href="{% url 'pedidos:pedido_delete' pedido.pk %}">Eliminar</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="9">No hay pedidos.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>